화면처럼 22.04.5 LTS 업그레이드 알림이 떠 있는 상태라면 그 흐름부터 이어가면 됩니다.

1. 업데이트부터 마무리하기
지금 창에서 Yes, Upgrade Now를 누르고 진행하세요. 진행 중에는 노트북 전원 연결을 해두고, 중간에 끄지 않는 게 중요합니다. 
업데이트가 끝나면 재부팅을 요구할 수 있는데, 재부팅까지 완료하세요.

2. 업데이트가 끝났는지 확인하기
재부팅 후 바탕화면이 뜨면, 키보드에서 Ctrl + Alt + T를 누르면 터미널이 열립니다. 터미널에 아래를 입력하고 엔터를 누르세요.

lsb_release -a
출력에 Ubuntu 22.04.5 LTS처럼 22.04.x가 나오면 정상입니다.

3. 기본 패키지 최신화하기
터미널에서 아래 두 줄을 순서대로 입력합니다. 중간에 비밀번호를 묻으면 우분투 로그인 비밀번호를 입력하면 됩니다. 
입력할 때 화면에 글자가 안 보이는 게 정상입니다.
sudo apt update
sudo apt upgrade -y

4. ROS2 Humble 설치 준비하기
ROS는 우분투에 “공식 저장소 키와 패키지 목록”을 등록한 뒤 설치합니다. 
아래 명령을 순서대로 그대로 입력하세요.

sudo apt install -y software-properties-common curl gnupg

sudo add-apt-repository universe -y

sudo curl -sSL https://raw.githubusercontent.com/ros/rosdistro/master/ros.key -o /usr/share/keyrings/ros-archive-keyring.gpg

echo "deb [arch=$(dpkg --print-architecture) signed-by=/usr/share/keyrings/ros-archive-keyring.gpg] http://packages.ros.org/ros2/ubuntu $(. /etc/os-release && echo $UBUNTU_CODENAME) main" | sudo tee /etc/apt/sources.list.d/ros2.list > /dev/null

sudo apt update


5. ROS2 Humble 설치하기
가장 무난한 설치는 데스크톱 버전입니다. RViz 같은 도구까지 같이 깔립니다.
sudo apt install -y ros-humble-desktop

6. ROS 환경 설정하기
설치 후 ROS 명령이 터미널에서 항상 인식되도록 설정합니다.
echo "source /opt/ros/humble/setup.bash" >> ~/.bashrc
source ~/.bashrc

7. 설치가 됐는지 간단 테스트하기
터미널을 두 개 열어서 아래처럼 실행해보세요.

첫 번째 터미널
ros2 run demo_nodes_cpp talker

두 번째 터미널
ros2 run demo_nodes_cpp listener

두 번째 터미널에서 “I heard …” 같은 메시지가 계속 나오면 ROS2 설치가 정상입니다.

8. 다음 단계로 넘어가기 전에 꼭 해둘 것
지금 단계에서는 로봇팔 연결을 바로 하지 말고, ROS 워크스페이스를 만들고 패키지 구조를 잡는 게 먼저입니다. 
아래 명령으로 작업 폴더를 만듭니다.
mkdir -p ~/ros2_ws/src
cd ~/ros2_ws
colcon build
source install/setup.bash

===================
1 dpkg 설치
sudo apt update
sudo apt install -y dpkg

2 dpkg가 잡히는지 확인
which dpkg
dpkg --version

3 그다음에 colcon 확인으로 다시 돌아가기
which colcon
colcon --version

4 만약 3에서 colcon이 아직도 안 나오면, colcon 실행 파일 들어있는 패키지를 추가 설치
sudo apt install -y python3-colcon-core python3-colcon-ros python3-colcon-common-extensions
which colcon
colcon --version

==============

1 colcon이 실제로 생겼는지 확인
which colcon
colcon --version

2 만약 위에서 아무것도 안 나오면 PATH 문제일 수 있으니 패키지 안의 파일 위치를 확인
dpkg -L python3-colcon-common-extensions | head -n 30
dpkg -L python3-colcon-colcon-core | grep /bin/ | head

3 그래도 colcon이 안 잡히면, colcon 실행파일이 들어있는 패키지를 한 번 더 설치
sudo apt install -y python3-colcon-core python3-colcon-ros

4 다시 확인
which colcon
colcon --version


===
워크스페이스 환경 적용
터미널에서 ~/ros2_ws 위치에서 아래를 실행해
source install/setup.bash

적용이 됐는지 확인
echo $COLCON_PREFIX_PATH
여기 출력에 .../ros2_ws/install 같은 경로가 포함되면 성공이야.

그런데도 ros2 pkg list에 내가 만든 패키지가 안 보인다면
그건 src 안에 빌드할 패키지가 아직 없어서 그래. 사진에서도 src 디렉토리 자체는 있지만, 안에 패키지 폴더가 있다는 증거는 아직 없거든.
확인은 이렇게 해
ls -l src

src가 비어있거나 패키지가 없다면, 패키지 하나 만든 뒤 빌드
cd ~/ros2_ws/src
ros2 pkg create --build-type ament_python my_pkg
cd ~/ros2_ws
colcon build
source install/setup.bash
ros2 pkg list | grep my_pkg

여기까지 하면 “source는 되는데 뭘 실행할 게 없다” 문제가 끝나고, 내 워크스페이스 패키지가 잡히는 상태가 돼.

여기까지 되면 “ROS로 프로그램을 만들 준비”가 끝난 겁니다.
============


이 다음에 보통 바로 확인하는 건 두 가지야.

지금 워크스페이스가 ROS에서 우선으로 잡히는지
echo $AMENT_PREFIX_PATH
여기에도 ~/ros2_ws/install 같은 경로가 앞쪽에 나오면 좋아.

패키지 인식되는지
ros2 pkg list | grep -i <패키지이름>
아직 패키지를 안 만들었다면, 먼저 예제 패키지 만들고 빌드하면 돼.

패키지 하나 만들어서 “내가 만든 노드”까지 실행해보고 싶으면, 지금 폴더가 ~/ros2_ws니까 아래 순서로 가면 돼.

패키지 만들기
cd ~/ros2_ws/src
ros2 pkg create --build-type ament_python my_pkg

다시 빌드
cd ~/ros2_ws
colcon build

다시 적용
source install/setup.bash

패키지 목록에 뜨는지 확인
ros2 pkg list | grep my_pkg
=====================

ROS 환경이 제대로 작동하는지 확인하는 단계로 넘어가면 돼. 아래 순서 그대로 따라 하면 된다.

ROS 노드 실행 테스트
터미널에
ros2 run demo_nodes_cpp talker
라고 입력해.
정상이라면 “Publishing:” 같은 로그가 계속 출력된다.

새 터미널 하나 더 열기
(중요: 새 터미널 열면 다시 환경 적용해야 함)
source ~/ros2_ws/install/setup.bash

그리고 입력
ros2 run demo_nodes_cpp listener

그러면 talker가 보내는 메시지를 listener가 받아서 출력한다.

이게 성공하면 의미
ROS 통신 시스템 DDS
환경 변수
워크스페이스 overlay
노드 실행

이 네 가지가 전부 정상이라는 뜻

